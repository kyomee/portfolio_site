---
/**
 * ScrollReveal Component
 * Adds fade-in + slide-up animation when elements enter viewport
 */
---

<script>
  // Intersection Observer for scroll reveal animations
  const observerOptions = {
    root: null,
    rootMargin: '0px',
    threshold: 0.1
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add('revealed');
        // Optionally unobserve after revealing
        observer.unobserve(entry.target);
      }
    });
  }, observerOptions);

  // Observe all elements with data-reveal attribute
  document.querySelectorAll('[data-reveal]').forEach((el) => {
    observer.observe(el);
  });
</script>

<style is:global>
  /* Base state for reveal elements */
  [data-reveal] {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
  }

  /* Stagger delays for child elements */
  [data-reveal="1"] { transition-delay: 0.1s; }
  [data-reveal="2"] { transition-delay: 0.2s; }
  [data-reveal="3"] { transition-delay: 0.3s; }
  [data-reveal="4"] { transition-delay: 0.4s; }
  [data-reveal="5"] { transition-delay: 0.5s; }

  /* Revealed state */
  [data-reveal].revealed {
    opacity: 1;
    transform: translateY(0);
  }

  /* Respect reduced motion preference */
  @media (prefers-reduced-motion: reduce) {
    [data-reveal] {
      opacity: 1;
      transform: none;
      transition: none;
    }
  }
</style>
